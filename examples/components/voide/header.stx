<header class="flex items-center justify-between px-5 py-3 bg-[#0f0f23] border-b border-[#2d2d4a]">
  <!-- Logo -->
  <div class="flex items-center gap-3">
    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-[#e94560] to-[#0f3460] flex items-center justify-center text-xl shadow-lg">
      {{ icon || 'ü§ñ' }}
    </div>
    <span id="appTitle" class="text-xl font-semibold tracking-tight text-[#eaeaea]">{{ title || 'Voide' }}</span>
  </div>

  <!-- Controls -->
  <div class="flex items-center gap-4">
    <!-- AI Driver Selector -->
    <div class="flex items-center gap-2">
      <label for="aiDriver" class="text-xs text-[#a0a0a0] font-medium hidden sm:inline">AI Driver:</label>
      <select
        id="aiDriver"
        class="bg-[#16213e] border border-[#2d2d4a] rounded-lg px-3 py-2 text-sm text-[#eaeaea] cursor-pointer hover:border-[#e94560] focus:border-[#e94560] focus:outline-none transition-colors"
        @change="window.voide?.handleDriverChange(event)"
      >
        <option value="claude-cli-local" selected>Claude CLI (Local)</option>
        <option value="claude-cli-ec2">Claude CLI (EC2)</option>
        <option value="claude">Claude API</option>
        <option value="openai">OpenAI</option>
        <option value="ollama">Ollama</option>
        <option value="mock">Mock</option>
      </select>
    </div>

    <!-- Repo Input -->
    <div class="flex items-center gap-2">
      <input
        type="text"
        id="repoInput"
        class="bg-[#0f0f23] border border-[#2d2d4a] rounded-lg px-3 py-2 text-sm text-[#eaeaea] placeholder-[#666] w-64 focus:border-[#e94560] focus:outline-none transition-colors"
        placeholder="github.com/owner/repo or local path..."
        @keypress="if (event.key === 'Enter') window.voide?.handleRepoAction()"
      />
      <button
        id="cloneBtn"
        class="bg-[#0f3460] border border-[#2d2d4a] rounded-lg px-4 py-2 text-sm text-[#eaeaea] cursor-pointer hover:bg-[#e94560] hover:border-[#e94560] transition-all duration-200"
        @click="window.voide?.handleRepoAction()"
      >
        Clone / Open
      </button>
    </div>

    <!-- GitHub Account -->
    <div
      id="githubAccount"
      class="flex items-center gap-2 px-3 py-2 rounded-lg bg-[#16213e] border border-[#2d2d4a] cursor-pointer hover:border-[#e94560] transition-all duration-200"
      title="Connect GitHub account"
      @click="window.voide?.openGithubModal()"
    >
      <span class="text-lg">üêô</span>
      <div class="flex flex-col">
        <span id="githubUsername" class="text-xs text-[#eaeaea] font-medium">Not connected</span>
        <span id="githubStatus" class="text-[10px] text-[#a0a0a0]">Click to connect</span>
      </div>
    </div>

    <!-- Settings Button -->
    <button
      id="settingsBtn"
      class="w-10 h-10 rounded-lg bg-[#16213e] border border-[#2d2d4a] flex items-center justify-center text-lg cursor-pointer hover:border-[#e94560] hover:bg-[#0f0f23] transition-all duration-200"
      title="API Settings"
      @click="window.voide?.openSettingsModal()"
    >
      ‚öôÔ∏è
    </button>
  </div>
</header>

<script>
// Update GitHub status based on reactive state
document.addEventListener('DOMContentLoaded', () => {
  const updateGithubStatus = () => {
    if (!window.voide) return

    const { github } = window.voide
    const githubUsername = document.getElementById('githubUsername')
    const githubStatus = document.getElementById('githubStatus')

    if (github.connected && github.username) {
      if (githubUsername) githubUsername.textContent = github.username
      if (githubStatus) githubStatus.textContent = 'Connected'
    } else {
      if (githubUsername) githubUsername.textContent = 'Not connected'
      if (githubStatus) githubStatus.textContent = 'Click to connect'
    }
  }

  // Poll for state changes
  setInterval(updateGithubStatus, 500)
  updateGithubStatus()
})
</script>
